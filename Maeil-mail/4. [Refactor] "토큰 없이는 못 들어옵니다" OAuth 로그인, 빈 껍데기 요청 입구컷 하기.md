> ν…μ¤νΈ μ½”λ“λ¥Ό μ‘μ„±ν•λ ¤κ³  λ΅μ§μ„ ν›‘μ–΄λ³΄λ‹¤κ°€ λ©μΉ«ν–λ‹¤. 'μ–΄? ν† ν°μ΄ μ—†λ”λ° μ™ μ •μƒ μ‘λ™ν•μ§€?'λ‹Ήμ—°ν λ§‰ν€μ•Ό ν•  μ”μ²­μ΄ μ—λ¬ μ—†μ΄ ν†µκ³Όλκ³  μμ—λ‹¤. κ°λ° λ‹¨κ³„μ—μ„  λ†“μ³¤λ κµ¬λ©μ„ ν…μ¤νΈ μ¤€λΉ„ κ³Όμ •μ—μ„ λ°κ²¬ν• κ²ƒμ΄λ‹¤. μλ»λ μ”μ²­μ΄ μ„λΉ„μ¤ λ΅μ§κΉμ§€ μ§„μ…ν•μ§€ λ»ν•λ„λ΅, μ…κµ¬μ—μ„λ¶€ν„° ν™•μ‹¤ν•κ² κ²€μ¦ λ΅μ§μ„ μ¶”κ°€ν• κ³Όμ •μ„ λ‚¨κΈ΄λ‹¤.
> 
> π”— **κ΄€λ ¨ PR**: [νμ› κ°€μ… μ”μ²­μ μ…λ ¥κ°’ κ²€μ¦ λ΅μ§μ„ μ¶”κ°€ν•λ‹¤.](https://github.com/maeil-mail/maeil-mail-be/pull/297)

</br>

## λ¦¬ν©ν† λ§ μ”μ•½

- **λ°°κ²½:** ν•„μκ°’μΈ `oauthAccessToken`μ΄ λ„λ½λμ–΄λ„ μ„λΉ„μ¤ κ³„μΈµκΉμ§€ μ§„μ…ν•μ—¬ 500 μ—λ¬ λ°μƒ
- **ν•µμ‹¬:** `@NotBlank`μ™€ `@Valid`λ¥Ό λ„μ…ν•μ—¬ μ»¨νΈλ΅¤λ¬ μ§„μ… μ‹μ μ— μ ν¨μ„± κ²€μ¦ μν–‰
- **κ²°κ³Ό:** λ¶ν•„μ”ν• λ΅μ§ μν–‰ λ°©μ§€ λ° λ…ν™•ν• μ—λ¬ μ‘λ‹µ μ κ³µ

</br>

## 1. λ¬Έμ  μƒν™©: λΉ ν† ν°μ„ λ³΄λ‚΄λ΄¤λ”λ‹...

νμ›κ°€μ… API(`POST /member`) κ²€μ¦ ν…μ¤νΈλ¥Ό μ„ν•΄ ν† ν°μ„ λΉ„μ›μ„ μ”μ²­μ„ μ „μ†΅ν•΄ λ³΄μ•λ‹¤.

```java
{
  "oauthAccessToken": ""
}
```

μμƒλ€λ΅λΌλ©΄ ν΄λΌμ΄μ–ΈνΈ μ—λ¬(400)κ°€ λ°μƒν•΄μ•Ό ν•μ§€λ§, μ‹¤μ λ΅λ” μ„λΉ„μ¤ λ΅μ§(`MemberService`)μ„ κ±°μ³ μ™Έλ¶€ API ν†µμ‹  λ¨λ“(`GithubClient`)κΉμ§€ νΈμ¶λκ³  μμ—λ‹¤. κ²°κµ­ GitHub μ„λ²„κ°€ "μΈμ¦ μ• λ μ”μ²­"μ΄λΌλ©° μ—λ¬λ¥Ό λ°ν™ν•κ³  λ‚μ„μ•Ό μ°λ¦¬ μ„λ²„λ„ 500μ„ λ±‰μ–΄λƒλ‹¤.

**κΈ°μ΅΄ λ΅μ§μ λ¬Έμ μ :**

1. **λ¦¬μ†μ¤ λ‚­λΉ„:** μ‹¤ν¨ν•  κ²ƒμ΄ λ…λ°±ν• μ”μ²­μ„μ—λ„ DB μ΅°νλ‚ μ™Έλ¶€ ν†µμ‹  κ°μ²΄ μƒμ„± λΉ„μ©μ΄ μ†λ¨λλ‹¤.
2. **λ¨νΈν• μ—λ¬:** ν΄λΌμ΄μ–ΈνΈλ” 500 μ—λ¬λ¥Ό μ„λ²„ λ‚΄λ¶€μ μ¥μ• λ΅ μΈμ‹ν•λ‹¤. "ν•„μ κ°’μ΄ λ„λ½λμ—λ‹¤"λ” λ…ν™•ν• κ°€μ΄λ“(400)κ°€ ν•„μ”ν•λ‹¤.

</br>
</br>

## 2. ν† ν°μ€ μ™ λ°λ“μ‹ ν•„μ”ν•κ°€?

μ†μ… λ΅κ·ΈμΈ κΈ°λ° μ„λΉ„μ¤μ—μ„ Access Tokenμ€ μ μ €κ°€ ν•΄λ‹Ή ν”λ«νΌμ μ‚¬μ©μμ„μ„ μ¦λ…ν•λ” μ μΌν• μλ‹¨μ΄λ‹¤. 
μ¦‰, ν† ν°μ€ μ°λ¦¬ μ„λΉ„μ¤ μ…μ¥μ—μ„λ” μ μ €μ μ‹ μ›μ„ λ³΄μ¦ν•λ” 'λ””μ§€ν„Έ μ‹ λ¶„μ¦'κ³Ό κ°™λ‹¤.

- **μ‹ μ› μ¦λ…:** λ°±μ—”λ“λ” ν† ν° μ—†μ΄ ν΄λΌμ΄μ–ΈνΈκ°€ λ³΄λ‚Έ μ •λ³΄λ§μΌλ΅λ” μ μ €μ μ§„μ„ μ—¬λ¶€λ¥Ό νμ•…ν•  μ μ—†λ‹¤.
- **μ •λ³΄ νλ“:** μ΄λ©”μΌμ΄λ‚ ν”„λ΅ν•„ μ‚¬μ§„ κ°™μ€ λ¦¬μ†μ¤λ” GitHubμ— μλ‹¤. ν† ν°μ„ μ μ‹ν•μ§€ μ•μΌλ©΄ GitHub APIλ” μ–΄λ– ν• μ •λ³΄λ„ λ‚΄μ£Όμ§€ μ•λ”λ‹¤.

κ²°κ³Όμ μΌλ΅ ν† ν°μ΄ μ—†λ” μ”μ²­μ€ λΉ„μ¦λ‹μ¤ λ΅μ§ μμ²΄κ°€ μ„±λ¦½λμ§€ μ•μΌλ―€λ΅, μ„λΉ„μ¤ λ μ΄μ–΄ μ§„μ…μ„ λ§‰κ³  Controller λ‹¨κ³„μ—μ„ μ°¨λ‹¨ν•΄μ•Ό ν•λ‹¤.

</br>
</br>

## 3. ν•΄κ²° κ³Όμ •: TDDλ΅ μ•μ „ν•κ² λ§‰μ•„λ³΄μ

μ΄λ―Έ κµ¬ν„λ μ½”λ“μ— λ³΄νΈλ§‰μ„ μ”μ°λ” μ‘μ—…μ΄λ―€λ΅, **"μ‹¤ν¨ν•λ” ν…μ¤νΈλ¥Ό λ¨Όμ € λ§λ“¤κ³ , μ΄λ¥Ό ν†µκ³Όμ‹ν‚¤λ”"** TDD λ°©μ‹μΌλ΅ μ ‘κ·Όν•μ—¬ μ•μ •μ„±μ„ ν™•λ³΄ν–λ‹¤.

### Step 1. μ‹¤ν¨ ν…μ¤νΈ μ‘μ„±

κ°€μ¥ λ¨Όμ € "λΉ ν† ν°μ„ λ³΄λ‚΄λ©΄ κ²€μ¦ μ—λ¬κ°€ λ°μƒν•΄μ•Ό ν•λ‹¤"λ” ν…μ¤νΈ μΌ€μ΄μ¤λ¥Ό μ‘μ„±ν–λ‹¤.

DTO κ²€μ¦ λ΅μ§μ„ ν…μ¤νΈν•λ” λ‹¨μ„ ν…μ¤νΈ(MemberRequestTest)λ¥Ό λλ ¤λ³΄μ•μΌλ‚, μμƒλ€λ΅ κ²€μ¦μ— κ±Έλ¦° ν•­λ©μ΄ μ—†μ–΄ ν…μ¤νΈλ” μ²μ°Έν•κ² μ‹¤ν¨ν–λ‹¤.

```java
// MemberRequestTest.java
@Test
void validate() {
    MemberRequest request = new MemberRequest(""); // λΉ ν† ν°
    Set<ConstraintViolation<MemberRequest>> violations = validator.validate(request);

    assertThat(violations).isNotEmpty(); // μ—λ¬κ°€ μμ–΄μ•Ό ν•λ”λ°...
}
```

**[μ‹¤μ  μ‹¤ν¨ λ΅κ·Έ]**

```
java.lang.AssertionError: 
Expecting actual not to be empty
    at maeilwiki.api.MemberApiTest.validate(MemberApiTest.java:30)
```

λ΅κ·Έμ `Expecting actual not to be empty`λ” "κ²€μ¦ μ„λ° μ‚¬ν•­μ΄ μμ„ μ¤„ μ•μ•λ”λ° ν•λ‚λ„ μ—†λ‹¤"λ” λ»μ΄λ‹¤. μ¦‰, ν„μ¬ μ½”λ“λ” λΉ ν† ν°μ„ μ •μƒμ μΈ κ°’μΌλ΅ μΈμ‹ν•κ³  μλ‹¤λ” μ¦κ±°λ‹¤.

</br>

### Step 2. DTOμ— κ·μΉ™ μ •μ λ° κ²€μ¦ ν™μ„±ν™”

μ”μ²­ κ°μ²΄μΈ `MemberRequest`μ— μ μ•½ μ΅°κ±΄μ„ λ…μ‹ν•κ³ , μ»¨νΈλ΅¤λ¬μ— `@Valid`λ¥Ό λ¶™μ—¬ κ²€μ¦μ„ ν™μ„±ν™”ν–λ‹¤.

```java
public record MemberRequest(
        @NotBlank(message = "OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤.") // λΉ κ°’ λ° κ³µλ°± λ°©μ§€
        String oauthAccessToken
) {}

// Controller
public ResponseEntity<Void> createMember(@Valid @RequestBody MemberRequest request) { ... }
```

**[μ‹¤μ  μ„±κ³µ λ΅κ·Έ]**

```
> Task :wiki-core:compileJava
> Task :wiki-api:compileJava
> Task :wiki-api:processResources NO-SOURCE
> Task :wiki-api:classes
> Task :wiki-api:compileTestJava
> Task :wiki-api:processTestResources UP-TO-DATE
> Task :wiki-api:testClasses
> Task :wiki-core:processResources NO-SOURCE
> Task :wiki-core:classes
> Task :wiki-core:jar
15:54:05.793 [Test worker] INFO org.hibernate.validator.internal.util.Version -- HV000001: Hibernate Validator 8.0.1.Final
> Task :wiki-api:test
BUILD SUCCESSFUL in 2s
6 actionable tasks: 5 executed, 1 up-to-date
μ¤ν›„ 3:54:05: μ‹¤ν–‰μ΄ μ™„λ£λμ—μµλ‹λ‹¤ ':wiki-api:test --tests "maeilwiki.api.MemberApiTest"'.

```

</br>
</br>

## 4. κΉμ΄ λ“¤μ—¬λ‹¤λ³΄κΈ°

### 4.1 μ—λ¬ λ©”μ‹μ§€μ μ •ν•©μ„±

κΈ°λ¥ κµ¬ν„ ν›„ λ‹¤μ‹ ν…μ¤νΈλ¥Ό λλ Έλ”λ°, μ΄λ²μ—λ” κΈ°λ¥μ€ λ™μ‘ν–μΌλ‚ **λ©”μ‹μ§€ λ¶μΌμΉ**λ΅ ν…μ¤νΈκ°€ μ‹¤ν¨ν–λ‹¤.

**[μ‹¤μ  μ‹¤ν¨ λ΅κ·Έ]**

```
Expecting ArrayList:
  ["OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤"]
to contain:
  ["OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤."]
but could not find the following element(s):
  ["OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤."]
```

μμ„Έν λ³΄λ‹ λ§μΉ¨ν‘(`.`) ν•λ‚ μ°¨μ΄μ€λ‹¤.

- κΈ°λ€κ°’: `"OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤."` (μ  μμ)
- μ‹¤μ κ°’: `"OAuth Access Tokenμ€ ν•„μμ…λ‹λ‹¤"` (μ  μ—†μ)

TDDκ°€ μ•„λ‹μ—λ‹¤λ©΄ API λ¬Έμ„μ™€ μ‹¤μ  μ‘λ‹µ λ©”μ‹μ§€κ°€ λ―Έμ„Έν•κ² λ‹¤λ¥Έ λ¶€λ¶„μ„ λ†“μΉ μ±„ λ°°ν¬ν–μ„ κ²ƒμ΄λ‹¤. 
ν…μ¤νΈ μ½”λ“λ” κΈ°λ¥ κ²€μ¦λΏλ§ μ•„λ‹λΌ, μ΄μ²λΌ "κ°λ°μκ°€ μ •μν• μ¤ν™μ„ μ •ν™•ν μ§€ν‚¤κ³  μλ”κ°€?"λ¥Ό κ°μ‹ν•λ” μ—­ν• λ„ μν–‰ν•λ‹¤. DTOμ λ©”μ‹μ§€μ— λ§μΉ¨ν‘λ¥Ό μ°μ–΄μ£Όκ³  λ‚μ„μ•Ό λ¨λ“  ν…μ¤νΈκ°€ ν†µκ³Όλ΅ λ°”λ€μ—λ‹¤.

### 4.2 Fail-Fast μ›μΉ™

μ΄λ² λ¦¬ν©ν† λ§μ€ Fail-Fast μ›μΉ™μ„ μ μ©ν• μ‚¬λ΅€λ‹¤.

μλ»λ λ°μ΄ν„°λ΅ λ΅μ§μ„ μν–‰ν•λ‹¤κ°€ λ§μ§€λ§‰ μκ°„μ— μ—λ¬κ°€ ν„°μ§€λ” κ²ƒλ³΄λ‹¤, κ°€λ¥ν• ν• μ§„μ… μ΄κΈ° λ‹¨κ³„μ—μ„ μ—λ¬λ¥Ό λ°μƒμ‹ν‚¤λ” κ²ƒμ΄ μ‹μ¤ν…μ μ•μ •μ„±κ³Ό λ””λ²„κΉ… μ©μ΄μ„± μΈ΅λ©΄μ—μ„ μ λ¦¬ν•λ‹¤. μ΄λ¥Ό ν†µν•΄ μ„λΉ„μ¤ λ΅μ§μ€ "μ…λ ¥ λ°μ΄ν„°λ” λ¬΄κ²°ν•λ‹¤"λ” μ „μ ν•μ— λΉ„μ¦λ‹μ¤ κµ¬ν„μ—λ§ μ§‘μ¤‘ν•  μ μκ² λμ—λ‹¤.

</br>
</br>

## 5. κ²°λ΅ : λ°μ΄ν„° μ •ν•©μ„±μ€ μ…κµ¬μ—μ„ κ²°μ •λλ‹¤

κ°„λ‹¨ν• μ–΄λ…Έν…μ΄μ… λ‘ κ°(`@NotBlank`, `@Valid`)λ¥Ό μ¶”κ°€ν• μ‘μ—…μ΄μ—μ§€λ§, μ΄λ¥Ό ν†µν•΄ μ–»μ€ μ΄μ μ€ λ…ν™•ν•λ‹¤.

1. **ν¨μ¨μ„±:** λ¶ν•„μ”ν• μ™Έλ¶€ API νΈμ¶ λΉ„μ© μ κ°.
2. **λ…ν™•μ„±:** ν΄λΌμ΄μ–ΈνΈμ—κ² μ •ν™•ν• μ—λ¬ μ›μΈ μ κ³µ.
3. **μ‹ λΆ°μ„±:** ν…μ¤νΈ μ½”λ“λ¥Ό ν†µν•΄ κ²€μ¦ λ΅μ§μ΄ ν•­μƒ μ‘λ™ν•¨μ„ λ³΄μ¥.
